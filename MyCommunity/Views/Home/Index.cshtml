@model MyCommunity.ViewModels.IndexViewModel

<script>
    $(function() {
        $('#mnu').accordion({
            heightStyle: "content",
            collapsible:true
        });
        $('#submitComment').button().click(function (event) {
            var comment = $("#comment").val();
            $.ajax({
                url: "/Home/Comment",
                type: "POST",
                data: { "comment": comment },
                success: function (data) {
                    if (data.state == "Success") {
                        $('#comments').prepend('<p>' + data.additional + '</p>');
                        $("#comment").val(null);
                    }
                    else {
                        alert(data.additional);
                    }
                },
                error: function (data) {
                    alert('Oops. Something wnet wrong!');
                }
            });
            return false;
        });

    });



   
</script>
 

@{
    ViewBag.Title = @Model.CommunityName;
}
<table>
    <tr>
        <td style="width:300px;vertical-align:top;">
    <div id="mnu">
        <h3>@Html.ActionLink("My Messages", "Messages")</h3>
        <div></div>
        <h3>@Html.ActionLink("My Councillors", "Councillors")</h3>
        <div></div>
        <h3>@Html.ActionLink("My MP", "MP")</h3>
        <div></div>
        <h3>@Html.ActionLink("My Neighbours", "Neighbours")</h3>
        <div></div>
        <h3>Community Events</h3>
        <div>
            
                
                    @foreach (var group in Model.Evts)
                    {
                        <p >@Html.ActionLink(group.Value, "Event", new { id = group.Key })</p>
                    }
                
                
                <p style="float:right">@Html.ActionLink("Browse", "BrowseEvents")</p>
            
        </div>
        <h3>My Groups</h3>
        <div>
            
                
                    @foreach (var group in Model.Groups)
                    {
                        <p>@Html.ActionLink(group.Value, "Group", new { id = group.Key })</p>
                    }
                
                
            <p style="float:right">@Html.ActionLink("Browse", "BrowseGroups")</p>
            
        </div>
        <h3>My Campaigns</h3>
        <div>
            
                    @foreach (var campaign in Model.Campaigns)
                    {
                        <p>@Html.ActionLink(campaign.Value, "Campaign", new { id = campaign.Key })</p>
                    }
            
                
            <p style="float:right">@Html.ActionLink("Browse", "BrowseCampaigns")</p>
        </div>
    </div>        
        </td>
        <td style="vertical-align:top" >
    @using (Html.BeginForm("Comment", "Home"))
    {
        @Html.AntiForgeryToken()

        <fieldset>
            <legend>Post:</legend>
            <ol>
                <li>
                    <label>Comment</label>
                    <input type="text" name="comment " id="comment" />
                </li>
            </ol>
            <input id="submitComment" type="submit" value="Post" />
        </fieldset>
    }
    <div id="comments">
        @foreach (var comment in Model.Comments.Messages)
        {
            <p>
                @comment.Message
            </p>
        }
    </div>            
        </td>
    </tr>
</table>    


    






