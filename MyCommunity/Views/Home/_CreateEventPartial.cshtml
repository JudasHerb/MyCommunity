@model MyCommunity.ViewModels.CreateEventViewModel

<script>
    $(function () {
        
        $("#Date").datepicker();
        
        $("#submit").button().click(function (event) {
            event.preventDefault();
            var name = $("#Name").val();
            var date = $("#Date").val();


            $.ajax({
                type: "POST",
                url: "/Home/CreateEvent",
                data: { "name": name, "date": date },
                success: function (data) {

                    if (data.state == "Success") {
                        $("#newEventPopup").dialog("close");
                        $(location).attr("href", data.additional);
                    } else {
                        alert(data.additional);
                    }
                },
                error: function (data) {
                    $(this).closest("#newEventPopup").dialog("close");
                }
            });
        });

    });
    
</script>

@using (Html.BeginForm()) {
    @Html.AntiForgeryToken()

    <fieldset>
        <legend>Enter details</legend>
        <ol>
            <li>
                @Html.LabelFor(m => m.Name)
                @Html.TextBoxFor(m => m.Name)
            </li>
            <li>
                @Html.LabelFor(m => m.Date)
                @Html.TextBoxFor(m => m.Date, new{@readonly="readonly"})
            </li>
            
        </ol>
        <input id="submit" type="submit" value="Save" />
    </fieldset>
}


